<div ng-controller="app.views.test.exams as vm">
    <accordion close-others="true">
        <accordion-group ng-repeat="test in tests">
            <accordion-heading>
                <div>
                    {{test.testName}}
                    <div style="float: right">
                        <a ui-sref="test.pass.question({test: test.testId, question: 1})" ng-click="$event.stopPropagation();" ng-if="vm.results[test.testId].testResultStatusCode == 'InProgress'">Answer</a>
                        <a class="glyphicon glyphicon-play" ng-click="start(test); $event.stopPropagation();" ng-if="!vm.results[test.testId] || vm.results[test.testId].testResultStatusCode != 'InProgress'">Start</a>
                    </div>
                </div>
            </accordion-heading>
            <div style="margin-bottom: 8px">
                <div ng-if="vm.results[test.testId]">
                    Status: {{vm.results[test.testId].testResultStatusCode}}
                </div>
                <div ng-if="vm.results[test.testId] && vm.results[test.testId].testResultStatusCode != 'InProgress'">
                    Score: {{vm.results[test.testId].testResultScore}} <br />
                    Rating: {{vm.results[test.testId].ratingTitle}}
                </div>
            </div>
        </accordion-group>
    </accordion>
</div>
